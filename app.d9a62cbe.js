parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"C36W":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function n(e,n,c){return n&&t(e.prototype,n),c&&t(e,c),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vue=void 0;var c=function(){function t(){e(this,t)}return n(t,[{key:"getInitTemplate",value:function(e){return'\n    <table class="table table-responsive">\n      <tbody>\n        <tr>\n          <td></td>\n          <td class="score" data-choiceid="'.concat(e.choices[0].id,'">\n            <div class="score__content">').concat(e.choices[0].score,'</div>\n\n          </td>\n          <td id="lastscorecol" class="add-col"></td>\n        </tr>\n        <tr>\n          <td></td>\n          <td data-choiceid="').concat(e.choices[0].id,'"  class="choice cell">\n            <div\n              class="choice-content text-center"\n              contenteditable="true"\n            >').concat(e.choices[0].content,'\n            </div>\n            <span class="choice-btn__del btn-del">Enlever</span>\n          </td>\n          <td class="addCell-choice add-col cell">\n            <div id="addChoice-btn">\n              Ajouter\n            </div>\n          </td>\n        </tr>\n        <tr class="factorRow">\n          <td data-factorid="').concat(e.factors[0].id,'" class="factor cell">\n            <div\n              class="factor-content text-center"\n              contenteditable="true"\n            >\n              ').concat(e.factors[0].content,'\n            </div>\n            <span class="factor-btn__del btn-del">Enlever</span>\n          </td>\n          <td class="rate" data-choiceid="').concat(e.choices[0].id,'" data-factorid="').concat(e.factors[0].id,'">\n          -\n          </td>\n        </tr>\n        <tr>\n          <td class="addCell-factor cell text-center">\n            <div id="addFactor-btn">\n              Ajouter\n            </div>\n          </td>\n          <td></td>\n          <td></td>\n        </tr>\n      </tbody>\n    </table>\n    ')}},{key:"getFirstRow",value:function(){return document.querySelector("tr")}},{key:"getSecondRow",value:function(){return document.querySelectorAll("tr")[1]}},{key:"getThirdRow",value:function(){return document.querySelectorAll("tr")[2]}},{key:"cloneCell",value:function(e){return e.cloneNode(!0)}},{key:"createFactorCell",value:function(e){var t=this.cloneCell(document.querySelector("td.factor[data-factorid='0']"));return t.dataset.factorid=e.lastFactorId,t.firstElementChild.innerHTML="Facteur ".concat(e.lastFactorId),t}},{key:"createChoiceCell",value:function(e){var t=this.cloneCell(document.querySelector(".choice.cell[data-choiceid='0']"));return t.dataset.choiceid=e.lastChoiceId,t.firstElementChild.innerHTML="Choix ".concat(e.lastChoiceId),t}},{key:"createRateCell",value:function(){var e=this.cloneCell(document.querySelector("[data-choiceid='0'][data-factorid='0']"));return e.innerHTML="-",e}},{key:"createScoreCell",value:function(e){var t=this.cloneCell(document.querySelector(".score[data-choiceid='0']"));return t.dataset.choiceid=e.lastChoiceId,t.firstElementChild.innerHTML="0",t}},{key:"createNewRow",value:function(e){var t=this,n=this.createNewDOMELement("tr","factorRow");return n.appendChild(this.createFactorCell(e)),e.choices.filter(function(e){return!0===e.visible}).forEach(function(c){var o=t.createRateCell();o.dataset.choiceid=c.id,o.dataset.factorid=e.lastFactorId,n.appendChild(o)}),n}},{key:"insertNewRow",value:function(e){var t=document.querySelector("tbody"),n=document.querySelectorAll("tr");t.insertBefore(this.createNewRow(e),n[n.length-1])}},{key:"insertNewColumn",value:function(e){var t=document.getElementById("lastscorecol"),n=this.getSecondRow().lastElementChild,c=document.getElementsByClassName("factorRow");this.getFirstRow().insertBefore(this.createScoreCell(e),t),this.getSecondRow().insertBefore(this.createChoiceCell(e),n);for(var o=c.length,r=0;r<o;r++){var a=e.factors.filter(function(e){return!0===e.visible}),l=this.createRateCell();l.dataset.choiceid=e.lastChoiceId,l.dataset.factorid=a[r].id,c[r].appendChild(l)}}},{key:"deleteRow",value:function(e){document.querySelectorAll("tr.factorRow").length>1&&e.parentNode.remove()}},{key:"deleteColumn",value:function(e){if(document.querySelectorAll("td.choice").length>1)for(var t=document.querySelectorAll("td[data-choiceid='".concat(e,"']")),n=t.length,c=0;c<n;c++)t[c].remove()}},{key:"updateScore",value:function(e,t){var n=document.querySelector(".score[data-choiceid='".concat(e,"']"));n.firstElementChild.innerHTML=t,n.lastElementChild.value=t}},{key:"incrementRate",value:function(e){var t=isNaN(e.target.textContent)?0:e.target.textContent;return t<3?t++:t=0,e.target.innerHTML=t,t}},{key:"setFocus",value:function(e){e.focus(),window.getSelection().selectAllChildren(e)}},{key:"renderBestChoice",value:function(e){var t=document.getElementById("best-choice"),n=e.replace(/\r?\n|\r/g,"");t.innerText="The best choice is : ".concat(n)}},{key:"createNewDOMELement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,r=document.createElement(e);return void 0!==t&&r.setAttribute("class",t),void 0!==n&&r.setAttribute("id",n),void 0!==c&&(r.dataset.choiceid=c),void 0!==o&&(r.dataset.factorid=o),r}}]),t}();exports.Vue=c;
},{}],"kRZE":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var c=t[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function i(e,i,c){return i&&t(e.prototype,i),c&&t(e,c),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Data=void 0;var c=function(){function t(){e(this,t),this.lastChoiceId=0,this.lastFactorId=0,this.choices=[{id:0,content:"Edit here your choice",score:0,visible:!0}],this.factors=[{id:0,content:"Factor 0",rate:0,visible:!0,factorsRate:[{choiceId:0,rate:0}]}]}return i(t,[{key:"getChoice",value:function(e){return this.choices.find(function(t){return t.id===e})}},{key:"getAllChoices",value:function(){return this.choices}},{key:"getFactor",value:function(e){return this.factors.find(function(t){return t.id===e})}},{key:"getAllFactors",value:function(){return this.factors}},{key:"getFactorRate",value:function(e,t){var i;return this.factors.forEach(function(c){c.factorsRate.forEach(function(o){c.id===e&&o.choiceId===t&&(i=o)})}),i}},{key:"getBestChoice",value:function(){var e=this.choices.filter(function(e){return!0===e.visible}).reduce(function(e,t){return e.score>t.score?e:t});return this.choices.filter(function(t){return t.score===e.score})}},{key:"setChoice",value:function(e){this.choices.push(e)}},{key:"setFactor",value:function(e){this.factors.push(e)}},{key:"setFactorRate",value:function(e,t,i){this.factors.forEach(function(c){c.id===e&&c.factorsRate.push({choiceId:t,rate:i})})}},{key:"setRate",value:function(e,t,i){this.factors.forEach(function(c){c.id===e&&c.factorsRate.forEach(function(e){e.choiceId===t&&(e.rate=i)})})}},{key:"setFactorVisible",value:function(e){this.factors.forEach(function(t){t.id===e&&!1===t.visible&&(t.visible=!0)})}},{key:"setFactorInvisible",value:function(e){this.factors.forEach(function(t){t.id===e&&!0===t.visible&&(t.visible=!1)})}},{key:"setChoiceVisible",value:function(e){this.choices.forEach(function(t){t.id===e&&!1===t.visible&&(t.visible=!0)})}},{key:"setChoiceInvisible",value:function(e){this.choices.forEach(function(t){t.id===e&&!0===t.visible&&(t.visible=!1)})}},{key:"setScore",value:function(){var e=this;this.choices.forEach(function(t){var i=0;e.factors.forEach(function(e){e.factorsRate.forEach(function(e){e.choiceId===t.id&&(i+=e.rate)})}),t.score=i})}}]),t}();exports.Data=c;
},{}],"r54C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Controler=void 0;var t=require("./vue.js"),e=require("./model.js");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}var c=function(){function i(n){a(this,i),this.wrapper=n,this.vue=new t.Vue,this.data=new e.Data}return n(i,[{key:"incrementLastChoiceId",value:function(){return this.data.lastChoiceId++}},{key:"incrementLastFactorId",value:function(){return this.data.lastFactorId++}},{key:"addFactor",value:function(){var t=this;this.incrementLastFactorId(),this.data.setFactor({id:this.data.lastFactorId,content:"Factor ".concat(this.data.lastFactorId),rate:0,visible:!0,factorsRate:[]}),this.data.choices.filter(function(t){return!0===t.visible}).forEach(function(e){t.data.setFactorRate(t.data.lastFactorId,e.id,0)}),this.vue.insertNewRow(this.data)}},{key:"addChoice",value:function(){var t=this;this.incrementLastChoiceId(),this.data.setChoice({id:this.data.lastChoiceId,content:"Choix ".concat(this.data.lastChoiceId),score:0,visible:!0}),this.data.factors.filter(function(t){return!0===t.visible}).forEach(function(e){return t.data.setFactorRate(e.id,t.data.lastChoiceId,0)}),this.vue.insertNewColumn(this.data)}},{key:"deleteElement",value:function(t,e){switch(t){case"factor":this.data.setFactorInvisible(parseInt(e.dataset.factorid)),this.vue.deleteRow(e);break;case"choice":this.data.setChoiceInvisible(parseInt(e.dataset.choiceid)),this.vue.deleteColumn(e.dataset.choiceid)}}},{key:"updateElementContent",value:function(t,e){switch(t){case"factor":this.data.factors[e.target.parentNode.dataset.factorid].content=e.target.innerText.trim();break;case"choice":this.data.choices[e.target.parentNode.dataset.choiceid].content=e.target.innerText.trim()}}},{key:"updateScore",value:function(t){var e=this,a=parseInt(t.target.dataset.factorid),i=parseInt(t.target.dataset.choiceid);this.data.setRate(a,i,this.vue.incrementRate(t)),this.data.setScore(),this.data.choices.forEach(function(t){t.id===i&&e.vue.updateScore(i,t.score)})}},{key:"updateBestChoice",value:function(){var t=this.data.getBestChoice().map(function(t){return t.content}).join(" / ");this.vue.renderBestChoice(t)}},{key:"initRender",value:function(t){t.innerHTML=this.vue.getInitTemplate(this.data),this.vue.setFocus(document.querySelector(".choice-content"))}},{key:"listenClickEvents",value:function(t){var e=this;t.addEventListener("click",function(t){t.target.hasAttribute("data-choiceid")&&t.target.hasAttribute("data-factorid")?(e.updateScore(t),e.updateBestChoice()):t.target===document.getElementById("addChoice-btn")?e.addChoice():t.target===document.getElementById("addFactor-btn")?e.addFactor():t.target.classList.contains("factor-btn__del")?e.deleteElement("factor",t.target.parentNode):t.target.classList.contains("choice-btn__del")?e.deleteElement("choice",t.target.parentNode):(t.target.classList.contains("factor-content")||t.target.classList.contains("choice-content"))&&t.target.addEventListener("input",function(){t.target.parentNode.dataset.factorid?(e.updateElementContent("factor",t),e.updateBestChoice()):t.target.parentNode.dataset.choiceid&&(e.updateElementContent("choice",t),e.updateBestChoice())})},!0)}}]),i}();exports.Controler=c;
},{"./vue.js":"C36W","./model.js":"kRZE"}],"QdeU":[function(require,module,exports) {
"use strict";var e=require("./controler.js");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var i=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"app";t(this,n),"string"!=typeof e?(this.el="app",console.log("the app will build in #app div")):this.el=e,this.main()}return r(n,[{key:"main",value:function(){this.wrapper=document.getElementById(this.el),this.controler=new e.Controler(this.wrapper),this.controler.initRender(this.wrapper),this.controler.listenClickEvents(this.wrapper)}}]),n}(),o=new i("app");
},{"./controler.js":"r54C"}]},{},["QdeU"], null)
//# sourceMappingURL=app.d9a62cbe.js.map